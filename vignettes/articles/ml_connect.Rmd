---
title: "Authentication: ml_connect"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(multilex)
```

To retrieve the necessary data, you need to provide Google and formr credentials. These credentials are used by the `googlesheets4::gs4_auth` and `formr::formr_connect` to access the data we require. These credentials are never stored, and are only used during you R session. You can provide your credentials by running:

```r
ml_connect("user@email.com")
```

This email should be the one you use to access the Participants Google spreadsheet. If you do not provide any email, you will be prompted to introduce one in the console. Next, you will be prompted to introduce the formr password in the console. Once you introduce the right email and password, you will be able to run all the other functions of the `multilex` package without having to provide your credentials again.

# How to securely save your password for future occasions
The  [keyring](https://r-lib.github.io/keyring/index.html) package allows to encrypt and save your credentials locally and securely. To save your MultiLex credentials, run:

```r
install.packages("keyring")
keyring::key_set(service = "multilex", username = "myemail@mail.com")
```

Then, introduce your password in the dialog box that will pop-up, and your credentials will be encrypted and locally saved. The next time you want to connect for Multilex in your script, use the following code:

```r
my_email <- "myemail@mail.com"
ml_connect(my_email, formr_password = keyring::key_get("multilex", my_email))
```

You will connect to MultiLex without having to type again your password in the console.
